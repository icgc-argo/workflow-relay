# Default values for helm.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: icgcargo/workflow-relay
  tag: latest
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: "wf-relay"
fullnameOverride: "workflow-relay"

service:
  type: ClusterIP
  port: 8080

ingress:
  enabled: true
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: wf-relay.light.overture.bio
      paths: [/]

  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

env:
  - name: ELASTIC_HOST
    value: "elasticsearch-master"
  - name: ELASTIC_PORT
    value: "9200"
  - name: ELASTIC_WORKFLOWINDEX
    value: "workflow"
  - name: ELASTIC_TASKINDEX
    value: "task"

  - name: SPRING_CLOUD_STREAM_KAFKA_BINDER_BROKERS
    value: "http://workflow-kafka-cp-kafka-headless"
  - name: SPRING_CLOUD_STREAM_KAFKA_BINDER_AUTOCREATETOPICS
    value: "true"

  - name: SPRING_CLOUD_STREAM_KAFKA_BINDINGS_WEBLOGOUT_CONSUMER_ENABLEDLQ
    value: "true"
  - name: SPRING_CLOUD_STREAM_KAFKA_BINDINGS_WEBLOGOUT_CONSUMER_DLQNAME
    value: "weblog_dlq"
  - name: SPRING_CLOUD_STREAM_KAFKA_BINDINGS_WEBLOGOUT_CONSUMER_AUTOCOMMITONERROR
    value: "true"
  - name: SPRING_CLOUD_STREAM_KAFKA_BINDINGS_WEBLOGOUT_CONSUMER_AUTOCOMMITOFFSET
    value: "true"

  - name: SPRING_CLOUD_STREAM_KAFKA_BINDINGS_WORKFLOWINDEX_CONSUMER_ENABLEDLQ
    value : "true"
  - name : SPRING_CLOUD_STREAM_KAFKA_BINDINGS_WORKFLOWINDEX_CONSUMER_DLQNAME
    value: "workflow_dlq"
  - name : SPRING_CLOUD_STREAM_KAFKA_BINDINGS_WORKFLOWINDEX_CONSUMER_AUTOCOMMITONERROR
    value: "true"
  - name : SPRING_CLOUD_STREAM_KAFKA_BINDINGS_WORKFLOWINDEX_CONSUMER_AUTOCOMMITOFFSET
    value: "true"

  - name : SPRING_CLOUD_STREAM_KAFKA_BINDINGS_TASKINDEX_CONSUMER_ENABLEDLQ
    value: "true"
  - name : SPRING_CLOUD_STREAM_KAFKA_BINDINGS_TASKINDEX_CONSUMER_DLQNAME
    value: "task_dlq"
  - name : SPRING_CLOUD_STREAM_KAFKA_BINDINGS_TASKINDEX_CONSUMER_AUTOCOMMITONERROR
    value: "true"
  - name : SPRING_CLOUD_STREAM_KAFKA_BINDINGS_TASKINDEX_CONSUMER_AUTOCOMMITOFFSET
    value: "true"
  
  - name: SPRING_CLOUD_STREAM_BINDINGS_WEBLOG_GROUP
    value: "weblog"
  - name: SPRING_CLOUD_STREAM_BINDINGS_WEBLOG_DESTINATION
    value: "weblog"
  - name: SPRING_CLOUD_STREAM_BINDINGS_WEBLOG_CONTENTTYPE
    value: "application/json"
  
  - name: SPRING_CLOUD_STREAM_BINDINGS_WORKFLOW_GROUP
    value: "splitter"
  - name: SPRING_CLOUD_STREAM_BINDINGS_WORKFLOW_DESTINATION
    value: "workflow"
  - name: SPRING_CLOUD_STREAM_BINDINGS_WORKFLOW_CONTENTTYPE
    value: "application/json"

  - name: SPRING_CLOUD_STREAM_BINDINGS_TASK_GROUP
    value: "splitter"
  - name: SPRING_CLOUD_STREAM_BINDINGS_TASK_DESTINATION
    value: "task"
  - name: SPRING_CLOUD_STREAM_BINDINGS_TASK_CONTENTTYPE
    value: "application/json"
  
  - name: SPRING_CLOUD_STREAM_BINDINGS_WEBLOGOUT_GROUP
    value: "splitter"
  - name: SPRING_CLOUD_STREAM_BINDINGS_WEBLOGOUT_DESTINATION
    value: "weblog"
  - name: SPRING_CLOUD_STREAM_BINDINGS_WEBLOGOUT_CONTENTTYPE
    value: "application/json"

  - name: SPRING_CLOUD_STREAM_BINDINGS_WORKFLOWINDEX_GROUP
    value: "index"
  - name: SPRING_CLOUD_STREAM_BINDINGS_WORKFLOWINDEX_DESTINATION
    value: "workflow"
  - name: SPRING_CLOUD_STREAM_BINDINGS_WORKFLOWINDEX_CONSUMER_MAXATTEMPTS
    value: 4
  - name: SPRING_CLOUD_STREAM_BINDINGS_WORKFLOWINDEX_CONTENTTYPE
    value: "application/json"

 - name: SPRING_CLOUD_STREAM_BINDINGS_TASKINDEX_GROUP
    value: "index"
  - name: SPRING_CLOUD_STREAM_BINDINGS_TASKINDEX_DESTINATION
    value: "task"
  - name: SPRING_CLOUD_STREAM_BINDINGS_TASKINDEX_CONSUMER_MAXATTEMPTS
    value: 4
  - name: SPRING_CLOUD_STREAM_BINDINGS_TASKINDEX_CONTENTTYPE
    value: "application/json"

    
nodeSelector: {}

tolerations: []

affinity: {}
